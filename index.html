<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>مسح QR</title>
<style>
body { font-family: Tahoma; text-align:center; background:#f5f5f5; }
video { width: 100%; max-width: 480px; border: 1px solid #ccc; border-radius: 10px; }
</style>
</head>
<body>
<h2>توجيه الباركود</h2>
<video id="preview"></video>
<p id="info"></p>

<script type="module">
import QrScanner from "https://cdn.jsdelivr.net/npm/qr-scanner@1.4.2/qr-scanner.min.js";

const videoElem = document.getElementById('preview');
const info = document.getElementById('info');

const scanner = new QrScanner(videoElem, result => {
    info.textContent = 'تم قراءة الرابط: ' + result;
    window.location.href = result; // التحويل تلقائي للرابط
});

QrScanner.hasCamera().then(hasCamera => {
    if (!hasCamera) info.textContent = "الكاميرا غير متوفرة";
});

scanner.start().catch(err => {
    info.textContent = "لا يمكن الوصول للكاميرا. تأكد من HTTPS أو localhost. " + err;
});
</script>
</body>
</html>
